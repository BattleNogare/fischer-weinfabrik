<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fischer Weinfabrik · Aufträge</title>
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/BattleNogare/h-h_weinfabrik/main/fischer_weinfabrik_logo.png">

  <style>
    :root{
      --bg:#0b0d10;
      --bg2:#0f1217;
      --card:#11151c;
      --text:#e7eaf0;
      --muted:#a8b0bf;
      --border: rgba(255,255,255,.10);
      --shadow: 0 16px 50px rgba(0,0,0,.45);
      --accent:#e11d48;
      --radius: 18px;
    }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(225,29,72,.22), transparent 55%),
        radial-gradient(900px 500px at 80% 20%, rgba(225,29,72,.12), transparent 50%),
        linear-gradient(180deg, var(--bg), var(--bg2));
    }
    .wrap{
      width: 92%;
      max-width: 1400px;
      margin: 22px auto 40px;
    }
    .shell{
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: rgba(17,21,28,.65);
      box-shadow: var(--shadow);
      overflow: hidden;
      backdrop-filter: blur(10px);
    }
    .shell-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
    }
    .brand{
      display:flex; align-items:center; gap:12px;
    }
    .brand img{
      width: 36px; height: 36px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,.2);
      padding: 6px;
    }
    .brand h1{
      margin:0;
      font-size: 16px;
      letter-spacing:.2px;
      line-height:1.1;
    }
    .brand .sub{
      margin:2px 0 0;
      font-size: 12px;
      color: var(--muted);
    }
    .pill{
      font-size: 12px;
      color: var(--muted);
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,.15);
    }

    /* iframe wrapper */
    .frame-wrap{
      position: relative;
      background: transparent;
    }
    iframe{
      width: 100%;
      border: 0;
      display:block;
      height: 900px; /* fallback, wird per postMessage überschrieben */
      background: transparent;
    }
    .hint{
      margin-top: 12px;
      color: var(--muted);
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="shell">
      <div class="shell-header">
        <div class="brand">
          <img alt="Logo" src="https://raw.githubusercontent.com/BattleNogare/h-h_weinfabrik/main/fischer_weinfabrik_logo.png">
          <div>
            <h1>Aufträge</h1>
            <div class="sub">GitHub Shell · Apps Script eingebettet</div>
          </div>
        </div>
        <div class="pill">Darkmode · Rot</div>
      </div>

      <div class="frame-wrap">
        <iframe id="appFrame" title="Aufträge App"></iframe>
      </div>
    </div>

    <div class="hint">
      Hinweis: Das UI läuft im eingebetteten Apps-Script iframe (keine CORS-Probleme), GitHub dient nur als hübsche Hülle.
    </div>
  </div>

  <script>
    // ✅ HIER deine Apps Script WebApp /exec URL eintragen:
    const APPS_SCRIPT_APP_URL = 'https://script.google.com/macros/s/AKfycbyrbnoenHlCFKW1Lk1bI_GOf9WFlw7IR9Y_fxZAsaOfG57Ddy4Ei2ENTTNCSN1IyypmzQ/exec';

    const frame = document.getElementById('appFrame');
    frame.src = APPS_SCRIPT_APP_URL + (APPS_SCRIPT_APP_URL.includes('?') ? '&' : '?') + 'embed=1';

    // Auto-Resize via postMessage aus App.html
    window.addEventListener('message', (event) => {
      const data = event.data;
      if (!data || data.type !== 'WEINFABRIK_HEIGHT') return;

      // Optional: origin check (empfohlen)
      // if (!String(event.origin).includes('script.google.com')) return;

      const h = Number(data.height);
      if (Number.isFinite(h) && h > 200) {
        frame.style.height = (h + 20) + 'px';
      }
    });
  </script>
</body>
</html>
